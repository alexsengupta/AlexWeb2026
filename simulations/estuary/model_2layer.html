<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2-Layer Estuary Model.</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div id="app">
        <header>
            <h1>2-Layer Estuary Model.</h1>
            <p>Upper and lower layers with stratification, salt wedge, and density-driven exchange flow</p>
            <a href="../../app_playground.html" class="playground-button" title="Back to Playground">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z" />
                </svg>
            </a>
            <a href="../../index.html" class="home-button" title="Back to Home">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
            </a>
        </header>

        <!-- Controls reorganized into 3 spatial columns -->
        <div id="controls-section">
            <div id="controls-panel">
                <div id="controls-header">
                    <h3>Controls</h3>
                    <div class="button-container" id="control-buttons-top"></div>
                </div>
                <div id="controls-grid">
                    <div class="controls-column" id="ocean-controls">
                        <h4>Ocean (Mouth)</h4>
                        <div id="ocean-sliders"></div>
                    </div>
                    <div class="controls-column" id="river-controls">
                        <h4>River (Head)</h4>
                        <div id="river-sliders"></div>
                    </div>
                    <div class="controls-column" id="physical-controls">
                        <h4>Physical Parameters</h4>
                        <div id="physical-sliders"></div>
                    </div>
                    <div class="controls-column" id="config-controls">
                        <h4>Model Configuration</h4>
                        <div id="config-sliders"></div>
                    </div>
                </div>
            </div>
            <!-- Export button removed -->
        </div>
    </div>

    <!-- Dual visualization views stacked vertically -->
    <div id="visualization-section">
        <!-- Temperature View -->
        <div id="temp-canvas-container"></div>
        <div class="colorbar-wrapper">
            <div class="colorbar-controls-horizontal">
                <label class="colorbar-auto-label">
                    <input type="checkbox" id="temp-colorbar-auto" checked> Auto
                </label>
                <span class="slider-value" id="temp-colorbar-min-value">5°C</span>
                <input type="range" id="temp-colorbar-min" min="0" max="35" value="5" step="0.5" disabled>
                <div id="temp-colorbar-display" class="colorbar-display"></div>
                <input type="range" id="temp-colorbar-max" min="0" max="35" value="30" step="0.5" disabled>
                <span class="slider-value" id="temp-colorbar-max-value">30°C</span>
            </div>
        </div>

        <!-- Salinity View -->
        <div id="sal-canvas-container"></div>
        <div class="colorbar-wrapper">
            <div class="colorbar-controls-horizontal">
                <label class="colorbar-auto-label">
                    <input type="checkbox" id="sal-colorbar-auto" checked> Auto
                </label>
                <span class="slider-value" id="sal-colorbar-min-value">0 psu</span>
                <input type="range" id="sal-colorbar-min" min="0" max="40" value="0" step="0.5" disabled>
                <div id="sal-colorbar-display" class="colorbar-display"></div>
                <input type="range" id="sal-colorbar-max" min="0" max="40" value="35" step="0.5" disabled>
                <span class="slider-value" id="sal-colorbar-max-value">35 psu</span>
            </div>
        </div>
    </div>

    <!-- Profile charts -->
    <div id="profile-section">
        <h3>Temperature & Salinity Profiles</h3>
        <div id="profile-charts-container">
            <div class="chart-wrapper">
                <canvas id="tempProfileChart"></canvas>
            </div>
            <div class="chart-wrapper">
                <canvas id="salProfileChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Velocity component charts -->
    <div id="velocity-section">
        <h3>Velocity Components</h3>
        <div id="velocity-charts-container">
            <div class="chart-wrapper">
                <canvas id="tidalVelocityChart"></canvas>
            </div>
            <div class="chart-wrapper">
                <canvas id="riverVelocityChart"></canvas>
            </div>
            <div class="chart-wrapper">
                <canvas id="baroclinicVelocityChart"></canvas>
            </div>
        </div>
    </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Parameter Help</h3>
                <button id="modal-close" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modal-description">Description goes here...</p>
            </div>
        </div>
    </div>

    <!-- Load modules -->
    <script src="EstuaryModel_2layer.js?v=20251024-11-BOX0-FIX"></script>
    <script src="Visualizer_2layer.js?v=20251024-11-BOX0-FIX"></script>
    <script src="Controls_2layer.js?v=20251024-11-BOX0-FIX"></script>
    <script src="Charts_2layer.js?v=20251024-11-BOX0-FIX"></script>
    <script src="sketch.js?v=20251024-11-BOX0-FIX"></script>
</body>

</html>